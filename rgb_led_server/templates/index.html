<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RGB LED Controller</title>

    <!-- Link the CSS file -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <!-- Header section -->
    <header>
        <h1>Raspberry Pi RGB LED Controller</h1>
        <p>Control and monitor hardware from a web interface</p>
    </header>

    <!-- Main content -->
    <main>
        <section class="content">

            <h2>LED Controls</h2>

            <!-- Toggle button -->
            <button onclick="toggleLED()">Toggle LED</button>

            <br><br>

            <!-- RGB sliders -->
            <label>Red</label><br>
            <input type="range" id="r" min="0" max="255" value="0"><br><br>

            <label>Green</label><br>
            <input type="range" id="g" min="0" max="255" value="0"><br><br>

            <label>Blue</label><br>
            <input type="range" id="b" min="0" max="255" value="0"><br><br>

            <!-- Set color button -->
            <button onclick="setColor()">Set Color</button>

            <!-- Status display -->
            <p id="status">LED status: unknown</p>

        </section>
    </main>

    <!-- JavaScript -->
    <script>

        // Toggle the LED on or off
        function toggleLED() {
            fetch("/api/toggle", { method: "POST" })
                .then(res => res.json())
                .then(data => {
                    if (data.on) {
                        document.getElementById("status").innerText = "LED ON";
                    } else {
                        document.getElementById("status").innerText = "LED OFF";
                    }
                });
        }

        // Send RGB values to the server
        function setColor() {
            const r = document.getElementById("r").value;
            const g = document.getElementById("g").value;
            const b = document.getElementById("b").value;

            fetch("/api/color", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ r, g, b })
            })
            .then(res => res.json())
            .then(() => {
                document.getElementById("status").innerText =
                    `LED Color: R${r} G${g} B${b}`;
            });
        }

        // Get LED status when page loads
        window.onload = function () {
            fetch("/api/status")
                .then(res => res.json())
                .then(data => {
                    if (data.on) {
                        document.getElementById("status").innerText = "LED ON";
                    } else {
                        document.getElementById("status").innerText = "LED OFF";
                    }
                });
        };

    </script>

    <!-- Footer -->
    <footer>
        <p>Â© 2026 RGB Controller</p>
    </footer>

</body>
</html>

